# 🍚meCSS

meCSS（めしーえすえす）は、さまざまな規模のフロントエンドプロジェクトに活用できるCSS命名規則、および実践的知見の寄せ集めです。

## 目次

- meCSSの考え方
- meCSSの２つのパート
- 事前知識：BEM
- meCSS Rule
  - アッパーキャメルのブロック名
  - ブロック‐エレメントの区切り文字は `__`
  - ハイフン始まりのモディファイア
  - エレメントを入れ子にしない
  - 単独モディファイアに対しスタイルを宣言しない
  - 状態とバリエーションを区別しない
  - 名前空間を利用しない
  - ユーティリティクラスを使用しない
  - CSSプリプロセッサを使用する
  - ３タイプのブロック
  - ブロックごとにファイルを分ける
  - ブロックはまとめてひとつのディレクトリに入れる
  - ブロックの中の要素にまとめてスタイルを当てない
  - `@extend` は使用しない
- [meCSS Practice](practice.md)

## meCSSの考え方

- **meCSSが目指すもの**
  - プロジェクトの規模を問わず活用できる命名規則やルールを提供すること
  - 理解や利用に相当の熟練を必要としないこと
  - コードを修正・追加・削除するとき、手を入れるべきコードの箇所が明白になること
  - 考える必要のあることを極小化し、簡素で、人によって解釈に差が出にくいルールであること

- **meCSSが興味のないこと**
  - 超大規模プロジェクトに耐えうること
  - 複数のテーマやデザインテンプレートをひとつのCSSファイルに出力する必要があるケース

## meCSSの２つのパート

meCSSは大きく２つのパートに分かれます。クラス命名規則やCSS、HTMLの書き方のルールを定めた**meCSS Rule**と、meCSSが目指す「よりよいコード」を実現するための実践的知見を集めた**meCSS Practice**です。

## 事前知識：BEM

BEMは、CSS設計にモジュラー性を取り入れることで再利用性や拡張性を実現した優れた手法です。meCSSはBEMを基本的な考え方として取り入れています。とりわけ次の概念はmeCSSの理解には欠かせません。

- **Block - ブロック**  
  それ自身が独立して意味のあるまとまり。 `header`, `menu`, `checkbox`, `input` など
- **Element - エレメント**  
  ブロックの一部分で、それ自身では独立できないまとまり。 `menu item`, `list item`, `checkbox caption`, `header title` など
- **Modifier - モディファイア**  
  ブロックやエレメントの状態や派生パターンを表現するフラグ。 `disabled`, `highlighted`, `checked`, `size big`, `color yellow` など

BEMに関する詳細は本家BEMウェブサイトを参照するか、日本語の解説リソースを参照してください。

- [BEM — Block Element Modifier](http://getbem.com/)

---

## meCSS Rule

meCSSのクラス命名規則をコードで表すと、次のようなコードになります。

```html
<div class="BlockName -modifier">
  <div class="BlockName__elementName"></div>
</div>
```

### アッパーキャメルのブロック名

ブロック名にはアッパーキャメルケースを用います。アッパーキャメルにすることで、ブロックであることを明瞭に表しています。

一方、エレメント名とモディファイア名にはローワーキャメルケースを用います。

### ブロック‐エレメントの区切り文字は `__`

ブロック名とエレメント名の区切りはアンダースコアを２つ連結して `__` と記述します。１つではなく２つとしている理由は、有名なBEM命名規則（MindBEMding）にならうのと同時に、視覚的をメリハリを付けて見やすさを確保するためです。

### ハイフン始まりのモディファイア

```html
<div class="BlockName -opened"></div>
```

BEMとは異なり、ブロック名を省略してハイフン始まりのクラス名を付与します。上記例では、「`BlockName` というブロックが開いた状態（`-opened`）になっている」ことを表現しています。ブロック名をつける場合と比べて、一見してモディファイアと識別でき、短く、JSとの相性も悪くありません。

欠点として、モディファイアを見ただけでは所属する先のブロック名が判明しないという点があります。この問題は、HTML構造を入れ子にするなどして、モディファイアと併記するブロック名やエレメント名をひとつだけにすることで簡単に解決可能なので、あまり問題にならないでしょう。

### エレメントを入れ子にしない

```css
/* NG */
.BlockName__element1__element2 { ... }

/* OK */
.BlockName__element2 { ... }
```

[公式でも非推奨とされている](http://getbem.com/faq/#css-nested-elements)ように、NGで示されているような書き方はしないでください。HTML構造上の入れ子関係があっても、エレメント名は連結せずに常に単体で用いるようにします。

### 単独モディファイアに対しスタイルを宣言しない

```css
/* NG */
.-opened { display: block; }

/* OK */
.BlockName.-opened { display: block; }
```

モディファイアを汎用ユーティリティクラスのように使ってはいけません。モディファイア付きのスタイルは、必ずブロックやエレメントと一緒に宣言してください。

### 状態とバリエーションを区別しない

```html
<div class="BlockName -sizeLarge -colorYellow -isOpened"></div>

<!-- Better -->
<div class="BlockName -large -yellow -opened"></div>
```

BEMでは、ブロックやエレメントの「状態」と、単なる見た目の「バリエーション」とを別々のモディファイアの書き方をしますが、meCSSでは区別せず同じ書き方をします。

例示は「状態」を `is` 、「バリエーション」を `size` や `color` でプレフィックスしていますが、状態とバリエーションを意味的に区別して考えられる人は稀なので、もともと区別しないほうがよいです。

### 名前空間を利用しない

```css
.top-BlockName {...}

/* Better */
.BlockName {...}
```

名前空間は推奨しません。名前空間はブロック名の手前にブロックの分類（上記例では `top-`）を記述することで、ブロック名の適用範囲を限定する命名テクニックです。

名前空間は、よほど大規模なウェブサイトでない限り必要ありません。唯一の名前空間のなかで重複のない命名を行うには、具体的かつ明白な命名が必要になります。ブロック名がより豊かな語彙で表現されることによって、わかりやすく、長期的なメンテナンスに耐えうるブロックが作られるとmeCSSは考えています。

### ユーティリティクラスを使用しない

上マージンを10pxに設定するために `-mt10` と書くようなやり方はしないでください。ユーティリティクラスは概してレスポンシブデザインとの相性が良くない上、むやみに乱用されるケースが多いです。これをするぐらいなら、`style="margin-top:10px"` と書いたほうがマシです。

### CSSプリプロセッサを使用する

Sass、Less、Stylusなどのプロプロセッサを使用します。

プリプロセッサを使う目的はブロックごとのファイル分割と統合です。それさえできればツールはなんでも構いません。変数や入れ子記法、関数などはあくまでサブの機能です。[meCSS Practice](practice.md)の「抽象化はとても慎重に行う」の項も参照のこと。

### ３タイプのブロック

ブロックはその性質に応じて３タイプに分かれます。「**第一級ブロック**」「**通常ブロック**」「**ページブロック**」。

- **第一級ブロック**。  
  粒度が細かくサイトの中で頻繁に登場します。ほかのブロックの中に内包されることも多いです。ボタンやアイコン、チェックボックスなどのフォーム入力欄あたりが該当します。第一級ブロックはそんなに数は多くないはずで、あっても10通りくらいです。
- **ページブロック**。  
  ページ（テンプレート）ごとにスタイルの微調整をかけるためのブロック。ページ全体をひとつのブロックと見なします。問い合わせ入力ページならば、`InquiryInputPage` みたいな名前で、body要素のclass属性値に割り当てられるのを想像してもらえばよいでしょう。ページブロックは微調整が必要になったときのための保険みたいなもので、使わずに済むに越したことはありません。
- それ以外は**通常ブロック**。  
  ほとんどのブロックは通常ブロックです。第一級ブロックやページブロックはそこからはみ出た例外だと考えてください。

### ブロックごとにファイルを分ける

１ブロック１ファイルに分け、そのファイルにはそのブロックのことしか記述しないこと。**面倒臭がらずに徹底してください**。怠けると「どこに何が書いてあるかわからない」コードが簡単にできあがってしまいます。

### ブロックはまとめてひとつのディレクトリに入れる

第一級ブロック、通常ブロック、ページブロックの分け隔てなく、ひとつのディレクトリにすべてのブロックファイルを格納します。これによりファイル名レベルでブロック名の重複がないことが保証されます。

### ブロックの中の要素にまとめてスタイルを当てない

```scss
.BlockName {
  ul, li, p { margin: 0; padding: 0; }
}
```

みたいな書き方は、してはいけません。これら `ul`, `li`, `p` にはきっとエレメント名が割り当てられ、エレメントとしてのスタイルも設定されるはずですが、上記の書き方だと詳細度の逆転が起きてしまい（`.BlockName ul` よりも `.BlockName__element` の詳細度のほうが低い）、予期せぬハマりを呼びがちです。

複数の要素にわたって共通したプロパティを指定したいケースであっても、要素セレクタでまとめて指定せず、各エレメントごとに毎回指定したほうがよいでしょう。

### `@extend` は使用しない

Sassの `@extend` は使いこなせば強力ですが、使いこなせる人はごく少数なので使わないようにします。どうしても使う場合は、そのブロック内での利用に限定したり、意図や使用上の注意を記したコメントを多めに残したりして、乱用を防ぐ工夫を凝らしてください。

## meCSS Practice

- [meCSS Practice](practice.md) はこちら
